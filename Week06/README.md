# Go架构实践-微服务: 微服务可用性设计
## 代码作业
> 参考 Hystrix 实现一个滑动窗口计数器

见 [main.go](main.go)

滑动窗口计数器，主要思想就是将时期 `duration` 分割成 `n` 个小段 `segment`，每小段各自计数，统计时将多段计数汇总

```
segment = duration / n
```

总共持有 `n+1` 个计数器，通过改变索引来实现循环列表，实现滑动窗口

每次计数时，获得当前时间对应的索引下标，更新计数值

每隔 `segment` 就自动将当前时间对应的的计数器清零

统计时，忽略正在使用的计数器，剩下的计数器的对应时间加起来刚好就是 duration，把它们的数值汇总
